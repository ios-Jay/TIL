import UIKit

/*: # í´ë¡œì €(Closure)
 */
/*: ## í´ë¡œì € - ì´ë¦„ì´ ì—†ëŠ”(ìµëª…)í•¨ìˆ˜
 - í•¨ìˆ˜ì˜ íƒ€ì…ì— ëŒ€í•œ í‘œê¸° (ë³µìŠµ)
 ---
 */
// í•¨ìˆ˜ì˜ íƒ€ì… í‘œê¸°ë²•

let functionA: (String) -> String

// 1)íŒŒë¼ë¯¸í„° ë¬¸ìì—´, 2)ë¦¬í„´í˜• ë¬¸ìì—´

let functionB: (Int) -> ()

// 1)íŒŒë¼ë¯¸í„° ì •ìˆ˜, 2)ë¦¬í„´í˜• ì—†ìŒ

let functionC: (String) -> Void

// 1)íŒŒë¼ë¯¸í„° ë¬¸ìì—´, 2)ë¦¬í„´í˜• ì—†ìŒ


/*: ---
 - ê¸°ì¡´ì˜ í•¨ìˆ˜ì˜ í˜•íƒœì™€ í´ë¡œì €ì˜ í˜•íƒœ ë¹„êµ
 ---
 */
// í•¨ìˆ˜ì˜ ì •ì˜

func aFunction(str: String) -> String {
    return "Hello \(str)"
}

// í´ë¡œì €ì˜ í˜•íƒœ: ì´ë¦„ì´ ì—†ëŠ” ìµëª…ì˜ í•¨ìˆ˜

let _ = {(str: String) -> String in
    
    return "Hello \(str)"
    
}

//:> ìƒê°ì˜ ì „í™˜ â ì¤‘ê´„í˜¸ëŠ” í´ë¡œì €(í•¨ìˆ˜)ì´ë‹¤!
let aClosureType = { () -> () in
    
    // ë³€ìˆ˜ì— ë‹´ì•„ì„œ í˜¸ì¶œí•˜ëŠ” ê²ƒë„ ê°€ëŠ¥

    print("Hello")
}


var helloClosureType = {print("ì•ˆë…•í•˜ì„¸ìš”.")} // () -> ()


aClosureType()


/*: ---
 - í•¨ìˆ˜ë¥¼ 1ê¸‰ê°ì²´(First-class Object)ë¡œ ì·¨ê¸‰
 ---
 */
/**================================================
 
 - í•¨ìˆ˜ë¥¼ 1ê¸‰ ê°ì²´ë¡œ ì·¨ê¸‰
 
 - 1) í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì— í• ë‹¹í•  ìˆ˜ ìˆë‹¤.
 
 - 2) í•¨ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ì´ ê°€ëŠ¥í•˜ë‹¤.
 
 - 3) (í•¨ìˆ˜ì—ì„œ) í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤. (ë¦¬í„´ ê°€ëŠ¥)
 
 ==================================================**/


func aFunction1(_ param: String) -> String {
    return param + "!"
}


func aFunction2(name: String) -> String {
    return name + "?!??"
}

// í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì— í• ë‹¹ê°€ëŠ¥(ë³€ìˆ˜ê°€ í•¨ìˆ˜ë¥¼ ê°€ë¥´í‚¤ê²Œ ë¨)

// ì†Œê´„í˜¸ëŠ” í•¨ìˆ˜ì˜ ì‹¤í–‰

// ë³€ìˆ˜ì— í•¨ìˆ˜ë¥¼ í• ë‹¹í•˜ë©´ íŒŒë¼ë¯¸í„°ê°€ í•„ìš”ì—†ë‹¤.

var a: (String) -> String = aFunction1

a("ì•ˆë…•")
a("ì¡ìŠ¤")
a("ì¡°ë˜")

a = aFunction2

a("hello")

// í•¨ìˆ˜(í´ë¡œì €)ë¥¼ ë³€ìˆ˜ì— í• ë‹¹í•´ì„œ

let closureType = { (param: String) -> String in
    
    // í´ë¡œì € ë¦¬í„°ëŸ´
    
    return param + "!"
    
}

// ì‚¬ìš©(ì‹¤í–‰)

closureType("ìŠ¤í‹°ë¸Œ")

//: ---

/*: ## í•¨ìˆ˜ì™€ í´ë¡œì €ì˜ í˜•íƒœ ë¹„êµ
 - í´ë¡œì €ì˜ í˜•íƒœ
 ---
 */
// í•¨ìˆ˜ì˜ í˜•íƒœ

func add(num1: Int, num2: Int) -> Int {
    let result = num1 + num2
    
    return result
}

add(num1: 3, num2: 7)

// í´ë¡œì €ì˜ í˜•íƒœ

let _ = { (n1: Int, n2: Int) -> Int in
    let result = n1 + n2
    return result
}


// í´ë¡œì €ì˜ í˜•íƒœ(íƒ€ì… ì¶”ë¡ ì´ ê°€ëŠ¥í•œ ê²½ìš°)


let _: (Int,Int) -> Int = {(number1, number2) in
    let result = number1 + number2
    return result
}

/*: ## í´ë¡œì €ì˜ í˜•íƒœ
 - ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” í˜•íƒœ: ë¦¬í„´í˜•ì— ëŒ€í•œ í‘œê¸°ë¥¼ ìƒëµ ê°€ëŠ¥
 ---
 */
let aClosure2 = { (str: String) in
    
    return "Hello \(str)"
    
}

// ë¦¬í„´ì„ í†µí•´ ì»´íŒŒì¼ëŸ¬ê°€ ì•„ì›ƒí’‹ì„ ì¶”ë¡ í•¨. ë”°ë¼ì„œ ë¦¬í„´í˜•ì— ëŒ€í•œ í‘œê¸°ë¥¼ ìƒëµ ê°€ëŠ¥

let aClosure3: (String) -> (String) = { (str) in
    
    // ì•„ê·œë¨¼íŠ¸ ë ˆì´ë¸”ì„ ë”°ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ

        return "Hello \(str)"
    
}

let aClosure4 = {
    
    // () -> ()
    print("This is thisğŸ¤£")
}


/*: ---
 - íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ì˜ ìƒëµë„ ëŒ€ë¶€ë¶„ ê°€ëŠ¥í•˜ë‹¤.
 ---
 */
let closureType5 = { str in
    
    // ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì… ì¶”ë¡  ê°€ëŠ¥í•œ ê²½ìš° ìƒëµ ê°€ëŠ¥
    
    return str + "!"
    
    // "!"ê°€ ë¬¸ìì—´ ì´ê¸° ë•Œë¬¸ì— ì»´íŒŒì¼ëŸ¬ê°€ str ì—­ì‹œ ë¬¸ìì—´ì´ë¼ê³  ì¶”ë¡ . ë”°ë¼ì„œ íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ë„ ìƒëµì´ ê°€ëŠ¥í•´ì§
    
}

//: ---

/*: ## í´ë¡œì €ì˜ ì‚¬ìš©
 - í´ë¡œì €ë¥¼ ì™œ ì‚¬ìš©í•˜ëŠ”ê°€? - 1
 ---
 */
// 1) (í´ë¡œì €ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ” í•¨ìˆ˜)ì •ì˜

func closureParamFunction(closure: () -> ()) {
    print("í”„ë¦°íŠ¸ ì‹œì‘")
    closure()
}

// íŒŒë¼ë¯¸í„°ë¡œ ì‚¬ìš©í•  í•¨ìˆ˜ / í´ë¡œì €ë¥¼ ì •ì˜

func printSwiftFunction() {     // í•¨ìˆ˜ë¥¼ ì •ì˜
    print("í”„ë¦°íŠ¸ ì¢…ë£Œ")
}

let printSwift = { () -> () in      // í´ë¡œì €ë¥¼ ì •ì˜
    
    print("í”„ë¦°íŠ¸ ì¢…ë£Œ")
    
}

// í•¨ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„£ìœ¼ë©´ì„œ ì‹¤í–‰ (ê·¸ë™ì•ˆì— ë°°ìš´ í˜•íƒœë¡œ ì‹¤í–‰í•œë‹¤ë©´)

closureParamFunction(closure: printSwiftFunction)

closureParamFunction(closure: printSwift)

// 2) í•¨ìˆ˜ë¥¼ ì‹¤í–‰í• ë•Œ í´ë¡œì € í˜•íƒœë¡œ ì „ë‹¬ (í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ )

// í•¨ìˆ˜ë¥¼ ì‹¤í–‰í• ë–„ íŒŒë¼ë¯¸í„°ë¡œ í´ë¡œì €ë¥¼ ì •ì˜ë¥¼ í•˜ë©´ì„œ ë°”ë¡œ ì „ë‹¬: í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 

// ì •ì˜ë¥¼ í•˜ë©´ì„œ ì „ë‹¬ì„ í•˜ë¯€ë¡œ êµ³ì´ ì´ë¦„ì´ í•„ìš” X

// ì¼ë°˜ì ìœ¼ë¡œ í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ëŠ” í˜•íƒœ: ì •ì˜ë¥¼ í•˜ë©´ì„œ ì „ë‹¬í•˜ëŠ” í˜•íƒœë¡œ ë§ì´ ì“°ì¸ë‹¤.

// í´ë¡œì €ê°€ ì´ë¦„ì´ í•„ìš” ì—†ëŠ” ì´ìœ : í•¨ìˆ˜ë¥¼ ì‹¤í–‰í• ë•Œ ì „ë‹¬í•˜ëŠ” í˜•íƒœë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì´ë¦„ì´ í•„ìš”ê°€ ì—†ìŒ

// í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ë•Œ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ëŠ” í•¨ìˆ˜ ->Callbackì„ ë°›ê¸° ë•Œë¬¸ì—, ì½œë°±í•¨ìˆ˜ë¼ê³  ë¶€ë¦„

closureParamFunction(closure: { () -> () in
    
    print("í”„ë¦°íŠ¸ ì¢…ë£Œ")
    
    // ë³¸ë˜ ì •ì˜ëœ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ì„œ, í´ë¡œì €ë¥¼ ì‚¬í›„ì ìœ¼ë¡œ ì •ì˜ ê°€ëŠ¥
    
})                              // (í™œìš©ë„ê°€ ëŠ˜ì–´ë‚¨)



closureParamFunction(closure: { () -> () in // () -> () in ìƒëµ ê°€ëŠ¥
    
    print("í”„ë¦°íŠ¸ ì¢…ë£Œ - 1")
    
    print("í”„ë¦°íŠ¸ ì¢…ë£Œ - 2")
})

/*: ---
 - í´ë¡œì €ë¥¼ ì™œ ì‚¬ìš©í•˜ëŠ”ê°€? - 2
 ---
 */

// 1) (í´ë¡œì €ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ” í•¨ìˆ˜)ì •ì˜

func closureCaseFunction(a: Int, b: Int, closure: (Int) -> Void) {
    
    let c = a + b
    
    closure(c)
    
}

closureCaseFunction(a: 7, b: 7, closure: { param  -> () in       // 14 -> ...
    print("hello: \(param)")
})




// 2) í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ë•Œ (í´ë¡œì € í˜•íƒœë¡œ ì „ë‹¬)

closureCaseFunction(a: 5, b: 2, closure: { (n) in
    
    // ì‚¬í›„ì  ì •ì˜: í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ (ì»¤ìŠ¤í„° ë§ˆì´ì§•ì˜ ë²”ìœ„ê°€ ë„“ì–´ì§)
    
    print("ì´ì œ ì¶œë ¥í• ê»˜ìš”: \(n)")
    
})



closureCaseFunction(a: 5, b: 2) {(number) in      // ì‚¬í›„ì  ì •ì˜
    
    print("ì¶œë ¥í• ê¹Œìš”? \(number)")
    
}


closureCaseFunction(a: 5, b: 3) { (number) in      // ì‚¬í›„ì  ì •ì˜
    
    print("ì¶œë ¥")
    
    print("ì¶œë ¥")
    
    print("ì¶œë ¥")
    
    print("ê°’: \(number)")
    
}

/*: ---
 - ì—¬ëŸ¬ê°€ì§€ ì˜ˆì‹œë¡œ ì •í™•í•˜ê²Œ ì´í•´í•˜ê¸°
 ---
 */

let print1 = {
    
    print("1")
}

let print2 = {
    
    print("2")
}

let print3 = {
    
    print("3")
}


// í•¨ìˆ˜ì˜ ì •ì˜

func multiClosureFunction(closure1: () -> Void, closure2: () -> Void) {
    
    closure1()
    closure2()
}





// í•¨ìˆ˜ì˜ ì‹¤í–‰

multiClosureFunction(closure1: print1, closure2: print2)

multiClosureFunction(closure1: print2, closure2: print3)


multiClosureFunction(closure1: {
    
    print("1")
    
}, closure2: {
    
    print("2")
})



// í•¨ìˆ˜ì˜ ì •ì˜

func performClosure(closure: () -> ()) {
    print("ì‹œì‘")
    closure()
    print("ë")
}



// í•¨ìˆ˜ì˜ ì‹¤í–‰

performClosure(closure: {
    
    print("ì¤‘ê°„")
})





